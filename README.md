# Autobgm (For SillyTavern)

## 기능 (원하는...)
- 제작 목적: 프리셋에 추가한 BGM들에 키워드를 매칭, Ai의 마지막 메시지에 해당 키워드가 있을 시 우선도에 따라 mp3 파일 자동 재생
- 사용 방법:
0) 해당 확장을 SillyTavern의 확장 프로그램 설치를 눌러 설치
  * 링크: https://github.com/GgangMyChaeng/AutoBGM
1) 확장 메뉴 중 AutoBGM을 눌러 메뉴를 펼친 뒤 Enabled를 눌러 해당 확장을 활성화
2) Enabled 버튼 아래 톱니바퀴(Settings) 버튼 클릭을 통해 해당 확장의 모달 화면 활성화
3) 프리셋 제작 or 캐릭터 카드 전용 프리셋 (봇 카드 선택 시 자동 생성됨) or 프리셋 불러오기
4) BGM 삽입 (mp3 파일)
5) BGM list의 bgm별로 키워드 매칭 (쉼표를 사용하여 다수의 키워드 매칭 가능)
6) 개인 세팅
  * 마지막 ai 메시지에 키워드 없을 시 자동으로 재생될 Default audio 지정
  * 볼륨 조정
  * 우선도(Priority) 조정: 다수의 키워드가 지문에 걸렸을 때, 해당 값이 가장 큰 BGM을 재생
7) 키워드 모드(Keyword Mode)*가 켜져있는 상태로 모달 화면을 닫고 채팅
  * 키워드 모드(Keyword Mode): 해당 기능을 활성화할 시, Ai의 마지막 메시지에서 키워드가 인식되면 자동으로 해당 BGM이 조건에(키워드 인식, 우선도 등) 따라 자동 재생됨

## 현재 상태
제작 중

### 체크 리스트
- 해당 확장이 SillyTavern 내의 확장 메뉴에 뜨는가? (O)
- 확장 메뉴 ui가 적용됐는가? (O)
- 모달 ui가 적용됐는가? (X)
- 프리셋 ui가 정상적으로 세팅됐는가? (X)
- 프리셋 기능인
  * 저장, 삭제가 작동하는가? (X)
  * 불러오기, 내보내기가 작동하는가? (X)
- BGM list의 ui가 정상적으로 세팅됐는가? (X)
- BGM list의 기능인
  * BGM 삽입, 삭제가 작동하는가? (X)
  * 키워드 저장이 작동하는가? (X)
  * 키워드 인식이 작동하는가? (X)
  * 개별 볼륨 조절 설정이 작동하는가? (X)
- AutoBGM의 기능인
  * BGM 재생, 일시정지가 작동하는가? (X)
  * Default BGM이 상시 재생되는가? (X)
  * 키워드 모드의 자동 재생이 작동하는가? (X)
  * BGM이 채팅마다 각각 정상 작동하는가? (X)
  * BGM이 채팅에서 나왔을 시 정상적으로 꺼지는가? (X)
  * 키워드 변동이 없을 시 BGM이 유지되는가? (X)

## 원하는 방향 디테일
- 프리셋: 저장, 삭제, 내보내기(BGM 포함), 불러오기(BGM 포함)
- BGM: 
  * 기본: 삽입(해당 경로에 저장), 삭제, 
  * 키워드 매칭 (wi처럼 쉼표로 키워드 다수 매칭 가능하게)
  * 키워드 인식 후 자동 재생:
    - ai 메시지에만 반응해야 함
    - 키워드 변동이 없을 시 BGM이 유지되어야 함
    - 해당 채팅에서 나왔을 때는 자동으로 OFF되어야 함
    - 해당 채팅에 다시 들어갔을 때는 자동으로 ON되어야 함(확장 enabled일 때만)
    - BGM mp3 파일별 개별 볼륨 조절 설정(mp3 파일의 사운드 트랙 볼륨이 다를 수 있으므로 확장에서 세부적으로 따로 조절할 수 있도록)
